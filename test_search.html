<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h3>–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
        
        <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è -->
        <div class="card mb-4 filter-card">
            <div class="card-header">
                <h6 class="mb-0">üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <input type="text" id="userSearch" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..." onkeyup="filterUsers()">
                    </div>
                    <div class="col-md-3">
                        <select id="roleFilter" class="form-select" onchange="filterUsers()">
                            <option value="">–í—Å–µ —Ä–æ–ª–∏</option>
                            <option value="admin">admin</option>
                            <option value="user">user</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <select id="statusFilter" class="form-select" onchange="filterUsers()">
                            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="protected">–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ</option>
                            <option value="normal">–û–±—ã—á–Ω—ã–µ</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button type="button" class="btn btn-outline-secondary" onclick="clearFilters()">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    </div>
                </div>
                <div class="mt-2">
                    <small class="text-muted">–ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <span id="userCount">4</span></small>
                </div>
            </div>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        <div class="table-responsive" style="max-width: 800px;">
            <table class="table table-striped" id="usersTable">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Roles</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>admin</td>
                        <td>admin, user</td>
                        <td><span class="badge bg-warning">–ó–∞—â–∏—â–µ–Ω</span></td>
                    </tr>
                    <tr>
                        <td>testuser</td>
                        <td>user</td>
                        <td><span class="badge bg-success">–û–±—ã—á–Ω—ã–π</span></td>
                    </tr>
                    <tr>
                        <td>manager</td>
                        <td>admin</td>
                        <td><span class="badge bg-success">–û–±—ã—á–Ω—ã–π</span></td>
                    </tr>
                    <tr>
                        <td>guest</td>
                        <td>user</td>
                        <td><span class="badge bg-success">–û–±—ã—á–Ω—ã–π</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function filterUsers() {
            const searchTerm = document.getElementById('userSearch').value.toLowerCase();
            const roleFilter = document.getElementById('roleFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            
            const table = document.getElementById('usersTable');
            const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');
            let visibleCount = 0;
            
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const username = row.cells[0].textContent.toLowerCase();
                const roles = row.cells[1].textContent.toLowerCase();
                const status = row.cells[2].textContent.toLowerCase();
                
                let showRow = true;
                
                // –§–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (searchTerm && !username.includes(searchTerm)) {
                    showRow = false;
                }
                
                // –§–∏–ª—å—Ç—Ä –ø–æ —Ä–æ–ª–∏
                if (roleFilter && !roles.includes(roleFilter.toLowerCase())) {
                    showRow = false;
                }
                
                // –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
                if (statusFilter) {
                    if (statusFilter === 'protected' && !status.includes('–∑–∞—â–∏—â–µ–Ω')) {
                        showRow = false;
                    }
                    if (statusFilter === 'normal' && status.includes('–∑–∞—â–∏—â–µ–Ω')) {
                        showRow = false;
                    }
                }
                
                row.style.display = showRow ? '' : 'none';
                if (showRow) visibleCount++;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
            document.getElementById('userCount').textContent = visibleCount;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
            showNoResultsMessage(visibleCount === 0);
        }
        
        function clearFilters() {
            document.getElementById('userSearch').value = '';
            document.getElementById('roleFilter').value = '';
            document.getElementById('statusFilter').value = '';
            filterUsers();
        }
        
        function showNoResultsMessage(show) {
            let noResultsRow = document.getElementById('noResultsRow');
            
            if (show && !noResultsRow) {
                const table = document.getElementById('usersTable');
                const tbody = table.getElementsByTagName('tbody')[0];
                noResultsRow = document.createElement('tr');
                noResultsRow.id = 'noResultsRow';
                noResultsRow.innerHTML = '<td colspan="3" class="text-center text-muted py-4">üîç –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞.</td>';
                tbody.appendChild(noResultsRow);
            } else if (!show && noResultsRow) {
                noResultsRow.remove();
            }
        }
        
        // CSS —Å—Ç–∏–ª–∏
        const style = document.createElement('style');
        style.textContent = `
            .filter-card {
                border-left: 4px solid #0d6efd;
                max-width: 800px;
            }
            
            #userSearch:focus {
                border-color: #0d6efd;
                box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
            }
            
            #usersTable tbody tr {
                transition: opacity 0.3s ease;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>