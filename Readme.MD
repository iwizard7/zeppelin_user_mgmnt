# üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ Zeppelin

## üìã –û–±–∑–æ—Ä
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏ –≤ Apache Zeppelin —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ `shiro.ini`. –í–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, —É–¥–∞–ª–µ–Ω–∏—è –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∞ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–ª—É–∂–±—ã Zeppelin.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üîê **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
- üõ°Ô∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
- üîÑ **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Zeppelin**: –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã Zeppelin –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º.
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: —É–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/iwizard7/zeppelin_user_mgmnt.git
cd zeppelin_user_mgmnt
```

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3.
```bash
pip install flask
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
python app.py
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: [http://127.0.0.1:5000](http://127.0.0.1:5000)

## ‚ùáÔ∏è –ó–∞–ø—É—Å–∫ –≤ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
```bash
docker build -t zeppelin_user_mgmnt .
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
docker run -d -p 5000:5000 --name zeppelin_user_mgmnt zeppelin_user_mgmnt
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:5000](http://localhost:5000)

## ‚ùáÔ∏è Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ó–∞–ø—É—Å–∫ —Å Docker Compose
```bash
docker-compose up -d --build
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `shiro.ini`
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É `shiro.ini` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `shiro_ini_path` –∏ —Ñ–∞–π–ª –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `shiro.ini`:
```
[users]
admin = admin123, admin
user1 = pass1, role1
user2 = pass2, role2

[roles]
admin = *
role1 = *
role2 = *
```

## üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Apache Zeppelin
–ö–Ω–æ–ø–∫–∞ **Restart Zeppelin** –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
```bash
sudo systemctl stop zeppelin
sleep(30)
sudo systemctl start zeppelin
```
‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã.

–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

–õ–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª app.log –∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
–§–æ—Ä–º–∞—Ç: –≤—Ä–µ–º—è, —É—Ä–æ–≤–µ–Ω—å, —Å–æ–æ–±—â–µ–Ω–∏–µ
–§—É–Ω–∫—Ü–∏—è log_user_action():

–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, IP-–∞–¥—Ä–µ—Å –∏ –¥–µ—Ç–∞–ª–∏
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
–õ–æ–≥–∏—Ä—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

LOGIN_SUCCESS/LOGIN_FAILED - —É—Å–ø–µ—à–Ω—ã–µ –∏ –Ω–µ—É–¥–∞—á–Ω—ã–µ –≤—Ö–æ–¥—ã
LOGOUT - –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
ADD_USER/ADD_USER_FAILED - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
DELETE_USER/DELETE_USER_FAILED - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
ASSIGN_ROLE/ASSIGN_ROLE_FAILED - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π
UNASSIGN_ROLE/UNASSIGN_ROLE_FAILED - —Å–Ω—è—Ç–∏–µ —Ä–æ–ª–µ–π
ADD_ROLE/ADD_ROLE_FAILED - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–µ–π
RESTART_ZEPPELIN/RESTART_ZEPPELIN_SUCCESS/RESTART_ZEPPELIN_FAILED - —Ä–µ—Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞
–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:

2025-01-17 14:30:15,123 - INFO - User: admin, Action: LOGIN_SUCCESS, IP: 192.168.1.100
2025-01-17 14:31:22,456 - INFO - User: admin, Action: ADD_USER, IP: 192.168.1.100, Details: Added user: newuser
2025-01-17 14:32:10,789 - INFO - User: admin, Action: RESTART_ZEPPELIN, IP: 192.168.1.100, Details: Initiated Zeppelin service restart



## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.

## üí° –ê–≤—Ç–æ—Ä—ã
- [iwizard7](https://github.com/iwizard7)

### ‚≠êÔ∏è –ë—É–¥—É —Ä–∞–¥ –∑–≤–µ–∑–¥–µ –Ω–∞ GitHub, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–ª–µ–∑–µ–Ω! üòä