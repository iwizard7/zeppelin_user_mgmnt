# üêõ –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ Zeppelin

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
Apache Zeppelin –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–ª **HTTP ERROR 503 Service Unavailable**

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
```bash
grep -i "error\|exception\|failed" /opt/zeppelin/logs/zeppelin-*.log
```

### –ù–∞–π–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞
```
ERROR [2025-08-11 11:38:10,276] ({main} EnvironmentLoader.java[initEnvironment]:152) - Shiro environment initialization failed
java.lang.IllegalArgumentException: Line argument must contain a key and a value. Only one string token was found.
```

### –ü—Ä–∏—á–∏–Ω–∞
–í —Ñ–∞–π–ª–µ `shiro.ini` –±—ã–ª–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–µ–∫—Ü–∏—è `[testbox]` —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º —Å—Ç—Ä–æ–∫:
```ini
[testbox]
askjha                # ‚ùå –°—Ç—Ä–æ–∫–∞ –±–µ–∑ –∑–Ω–∞–∫–∞ =
,MQ3OIUQ3            # ‚ùå –°—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–ø—è—Ç–æ–π
ASM,NDVOI3           # ‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
ZX,JBSEIHFER         # ‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
N,MZNDF,MN           # ‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω–æ–π —Å–µ–∫—Ü–∏–∏
–£–¥–∞–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `[testbox]` –∏ –≤—Å–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ `shiro.ini`

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zeppelin
```bash
sudo cp shiro.ini /opt/zeppelin/conf/shiro.ini
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
```bash
./zeppelin_control.sh restart
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚ùå HTTP 503 Service Unavailable
- ‚ùå –û—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Shiro
- ‚ùå –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ HTTP 200 OK
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Shiro
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
```bash
./zeppelin_control.sh status
# ‚úÖ Zeppelin is running [OK]
```

### HTTP –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
```bash
curl -s -o /dev/null -w "%{http_code}" http://localhost:8080
# ‚úÖ 200
```

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
INFO - User: admin, Action: LOGIN_SUCCESS, IP: 172.17.93.96
INFO - User: admin, Action: CHECK_ZEPPELIN_STATUS, IP: 172.17.93.96
```

### –õ–æ–≥–∏ Zeppelin
```
INFO - {"status":"OK","message":"","body":{"principal":"admin","ticket":"...","roles":"[\"admin\"]"}}
```

## üéØ –í—ã–≤–æ–¥—ã

1. **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞**: Zeppelin –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å Zeppelin
3. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å –≤ –æ–±–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –°—Ç–∞—Ç—É—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–æ—Ä–º–∞—Ç–∞ `shiro.ini` –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤**: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ Zeppelin –Ω–∞ –æ—à–∏–±–∫–∏
3. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–≤–∞—Ç—å backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

## üìù –í—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: 5 –º–∏–Ω—É—Ç
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: 2 –º–∏–Ω—É—Ç—ã  
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 3 –º–∏–Ω—É—Ç—ã
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 10 –º–∏–Ω—É—Ç

–ü—Ä–æ–±–ª–µ–º–∞ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞** ‚úÖ